{
    "sourceFile": "project/src/components/login.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1740223012892,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1740223749861,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,9 +23,9 @@\n       setLoading(false);\r\n \r\n       if (response.ok && data.success && data.authtoken) {\r\n         localStorage.setItem(\"token\", data.authtoken);\r\n-        navigate(\"/\");\r\n+        setTimeout(() => navigate(\"/\"), 2000);\r\n       } else {\r\n         setAlert(data.error || \"Invalid credentials. Please try again.\");\r\n       }\r\n     } catch (err) {\r\n"
                },
                {
                    "date": 1740223835035,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,9 +23,15 @@\n       setLoading(false);\r\n \r\n       if (response.ok && data.success && data.authtoken) {\r\n         localStorage.setItem(\"token\", data.authtoken);\r\n-        setTimeout(() => navigate(\"/\"), 2000);\r\n+        setSuccessMessage(\"Welcome back! Redirecting you to your dashboard...\");\r\n+\r\n+        // Redirect after 1 second\r\n+        setTimeout(() => {\r\n+          setSuccessMessage(\"\");\r\n+          navigate(\"/\");\r\n+        }, 1000);\r\n       } else {\r\n         setAlert(data.error || \"Invalid credentials. Please try again.\");\r\n       }\r\n     } catch (err) {\r\n"
                },
                {
                    "date": 1740223889619,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,15 +3,15 @@\n \r\n const Login = () => {\r\n   const [credentials, setCredentials] = useState({ email: \"\", password: \"\" });\r\n   const [loading, setLoading] = useState(false);\r\n-  const [alert, setAlert] = useState(\"\"); // Error alert state\r\n+  const [message, setMessage] = useState(\"\"); // State for success/error messages\r\n   const navigate = useNavigate();\r\n \r\n   const handleSubmit = async (e) => {\r\n     e.preventDefault();\r\n     setLoading(true);\r\n-    setAlert(\"\");\r\n+    setMessage(\"\");\r\n \r\n     try {\r\n       const response = await fetch(\"http://localhost:4000/api/auth/login\", {\r\n         method: \"POST\",\r\n@@ -21,23 +21,22 @@\n \r\n       const data = await response.json();\r\n       setLoading(false);\r\n \r\n-      if (response.ok && data.success && data.authtoken) {\r\n+      if (response.ok) {\r\n         localStorage.setItem(\"token\", data.authtoken);\r\n-        setSuccessMessage(\"Welcome back! Redirecting you to your dashboard...\");\r\n+        setMessage(\"Welcome back! Redirecting...\");\r\n \r\n-        // Redirect after 1 second\r\n         setTimeout(() => {\r\n-          setSuccessMessage(\"\");\r\n+          setMessage(\"\");\r\n           navigate(\"/\");\r\n         }, 1000);\r\n       } else {\r\n-        setAlert(data.error || \"Invalid credentials. Please try again.\");\r\n+        setMessage(data.error || \"Invalid credentials. Please try again.\");\r\n       }\r\n     } catch (err) {\r\n       setLoading(false);\r\n-      setAlert(\"An error occurred. Please try again later.\");\r\n+      setMessage(\"An error occurred. Please try again later.\");\r\n       console.error(\"Error during login:\", err);\r\n     }\r\n   };\r\n \r\n@@ -46,9 +45,17 @@\n   };\r\n \r\n   return (\r\n     <div className=\"container my-3\">\r\n-      {alert && <div className=\"alert alert-danger mt-3\">{alert}</div>}\r\n+      {message && (\r\n+        <div\r\n+          className={`alert mt-3 ${\r\n+            message.includes(\"Welcome\") ? \"alert-success\" : \"alert-danger\"\r\n+          }`}\r\n+        >\r\n+          {message}\r\n+        </div>\r\n+      )}\r\n \r\n       <h2>Login</h2>\r\n       <form onSubmit={handleSubmit}>\r\n         <div className=\"mb-3\">\r\n@@ -81,9 +88,9 @@\n           />\r\n         </div>\r\n \r\n         <button type=\"submit\" className=\"btn btn-primary\" disabled={loading}>\r\n-          {loading ? \"Logging in...\" : \"Submit\"}\r\n+          {loading ? \"Logging in...\" : \"Login\"}\r\n         </button>\r\n       </form>\r\n     </div>\r\n   );\r\n"
                }
            ],
            "date": 1740223012892,
            "name": "Commit-0",
            "content": "import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Login = () => {\r\n  const [credentials, setCredentials] = useState({ email: \"\", password: \"\" });\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState(\"\"); // Error alert state\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setAlert(\"\");\r\n\r\n    try {\r\n      const response = await fetch(\"http://localhost:4000/api/auth/login\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(credentials),\r\n      });\r\n\r\n      const data = await response.json();\r\n      setLoading(false);\r\n\r\n      if (response.ok && data.success && data.authtoken) {\r\n        localStorage.setItem(\"token\", data.authtoken);\r\n        navigate(\"/\");\r\n      } else {\r\n        setAlert(data.error || \"Invalid credentials. Please try again.\");\r\n      }\r\n    } catch (err) {\r\n      setLoading(false);\r\n      setAlert(\"An error occurred. Please try again later.\");\r\n      console.error(\"Error during login:\", err);\r\n    }\r\n  };\r\n\r\n  const onChange = (e) => {\r\n    setCredentials({ ...credentials, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container my-3\">\r\n      {alert && <div className=\"alert alert-danger mt-3\">{alert}</div>}\r\n\r\n      <h2>Login</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"email\" className=\"form-label\">\r\n            Email address\r\n          </label>\r\n          <input\r\n            type=\"email\"\r\n            className=\"form-control\"\r\n            value={credentials.email}\r\n            onChange={onChange}\r\n            id=\"email\"\r\n            name=\"email\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"password\" className=\"form-label\">\r\n            Password\r\n          </label>\r\n          <input\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            value={credentials.password}\r\n            onChange={onChange}\r\n            name=\"password\"\r\n            id=\"password\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <button type=\"submit\" className=\"btn btn-primary\" disabled={loading}>\r\n          {loading ? \"Logging in...\" : \"Submit\"}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"
        }
    ]
}